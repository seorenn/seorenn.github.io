<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="battery-savings" content="allow-reduced-framerate allow-reduced-script-speed" />
    <link rel="stylesheet" href="/static/v2style.css" />
    <title>Poetry 소개 및 간단한 사용법 정리 - Seorenn</title>
    <meta name="twitter:title" content="Poetry 소개 및 간단한 사용법 정리" />
    <meta name="og:title" content="Poetry 소개 및 간단한 사용법 정리" />
    <meta name="description" content="Poetry - Python용 패키징 겸 의존성 관리 도구의 간단한 사용법" />
    <meta name="twitter:description" content="Poetry - Python용 패키징 겸 의존성 관리 도구의 간단한 사용법" />
    <meta name="og:description" content="Poetry - Python용 패키징 겸 의존성 관리 도구의 간단한 사용법" />
    <link rel="canonical" href="https://seorenn.github.io/article/python-poetry.html" />
    <meta property="og:url" content="https://seorenn.github.io/article/python-poetry.html" />
    <link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico" />
    <meta name="twitter:image" content="https://seorenn.github.io/static/seorenn-symbol.png" />
    <meta property="og:image" content="https://seorenn.github.io/static/seorenn-symbol.png" />
    <meta property="og:image:width" content="520" />
    <meta property="og:image:height" content="329" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@seorenn" />
    <meta name="twitter:creator" content="@seorenn" />
    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="Seorenn" />
    <meta property="og:locale" content="ko_KR" />
    <meta name="referrer" content="unsafe-url" />
    <meta name="robots" content="follow,index" />
    <link rel="alternate" type="application/atom+xml" href="https://seorenn.github.io/atom.xml" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://seorenn.github.io/rss.xml" />
    <meta name="google-site-verification" content="YqTFZuthbvGIlDE1dhxiTjZ3m-GfyNs_rsHaOlPKpug" />
    <meta name="naver-site-verification" content="24609571c04926ab1220d5d02610efa1c9e12221" />
    <!-- AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1071465863344332" crossorigin="anonymous"></script>
    <!-- Google Analytics GA4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N5PL2YB2ZH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-N5PL2YB2ZH");
    </script>
  </head>
  <body>
    <div class="header-content">
      <header class="top-header">
        <div class="logo-container">
          <span class="vertical-center-helper"></span>
          <a href="/" title="Seorenn">
            <img class="site-logo" src="/static/seorenn-v2-logo-light.png" alt="Seorenn" />
          </a>
          <nav>
            <span class="vertical-center-helper"></span>
            <a href="/" title="Home">HOME</a> |
            <a href="https://seorenn.tistory.com" title="Seorenn Tistory Blog" target="_blank">TISTORY</a>
          </nav>
        </div>
      </header>
    </div>
    <div class="content-container">
      <section class="content">
        <header>
          <h1>Poetry 소개 및 간단한 사용법 정리</h1>
          <div class="title-date">
            
              
                <a href="../subject/python.html">Python</a>
                
              
              <span>//</spans>
            
            
              <span>2024년 07월 09일 작성</span>
            
            
            
          </div>
        </header>
        <p>Poetry는 Python용 패키징 겸 의존성 관리를 도와주는 도구로 pip나 virtualenv를 좀 더 포괄적으로 그리고 현대적으로 사용할 수 있게 도와준다. 이 Poetry의 사용법을 간단히 알아보자.</p>
<h2>프로젝트 시작하기</h2>
<p>Poetry는 당연하겠지만 프로젝트 단위로 사용할 수 있다. 그래서 사용하기 위해선 아래와 같이 <code>new</code> 커맨드로 프로젝트를 생성해야 한다.</p>
<pre><code class="language-bash">poetry new PROJECT_NAME
</code></pre>
<p>이렇게 하면 몇몇 확인 단계를 거쳐 새로운 파이썬 프로젝트를 생성할 수 있다.</p>
<p>만약 이미 존재하는 프로젝트에 Poetry 환경만 구성하고 싶다면 아래와 같이 <code>init</code> 커맨드를 사용해 보자.</p>
<pre><code class="language-bash">poetry init
</code></pre>
<p>위 두 커맨드 모두 핵심으로 프로젝트 루트에 <code>pyproject.toml</code>이라는 파일을 생성한다. 이름대로 프로젝트 정의 및 의존성 목록을 담은 중요한 파일이다.</p>
<h2>의존성 관리하기</h2>
<p>프로젝트에 의존성을 추가하려면 아래와 같이 <code>add</code> 커맨드를 사용하면 된다. 여기에 특정 버전을 명시할 수도 있고, 개발 모드 전용 의존성일 경우 <code>--dev</code> 플래그도 추가해 줄 수 있다.</p>
<pre><code class="language-bash">poetry add PACKAGE_NAME
poetry add ANOTHER_PACKAGE_NAME==x.y.z
poetry add --dev PACKAGE_NAME
</code></pre>
<p>이 명령들은 프로젝트의 virtualenv 환경에 자동으로 설치까지 진행된다.</p>
<p>의존성 패키지를 삭제하려면 <code>remove</code> 커맨드를 사용할 수 있다.</p>
<pre><code class="language-python">poetry remove PACKAGE_NAME
</code></pre>
<p>이 외에 사용하는 의존성 패키지들의 버전을 일괄적으로 업데이트 하려면 <code>update</code> 커맨드를 사용할 수 있다.</p>
<pre><code class="language-bash">poetry update
</code></pre>
<p>물론 <code>pyproject.toml</code> 스펙에 적힌 한도 내에서 최신 버전으로 업데이트 된다.</p>
<h2>수작업으로 의존성 관리하기</h2>
<p>CLI 커맨드 보다 수작업을 좋아한다면 <code>pyproject.toml</code> 파일을 열어서 직접 명시해 주는 방법도 있다. 예를 들자면 이런 식이다.</p>
<pre><code class="language-text">[tool.poetry.dependencies]
python = &quot;^3.8&quot;
somepackage = &quot;^3.10.0&quot;

[tool.poetry.dev-dependencies]
pytest = &quot;^5.2&quot;
</code></pre>
<p>버전 앞에 붙인 꺽쇠(<code>^</code>)의 의미는 '메이저 업데이트를 제외한 최신 버전' 이라는 의미이다. 즉 <code>^3.10.0</code>이라는 의미는 <code>3.x.y</code> 버전 중 가장 최신 버전을 사용한다는 의미다.</p>
<p>이렇게 작성한 후 <code>install</code> 커맨드를 사용하면 프로젝트의 virtualenv 환경에 일괄 패키지 설치가 가능하다.</p>
<pre><code class="language-python">poetry install
</code></pre>
<p>위 커맨드를 보고 <code>pip install -r requirements.txt</code>라는 커맨드가 떠오른다면 정답이다. 즉 이 커맨드를 <code>poetry install</code> 커맨드로 완전히 대체할 수 있다.</p>
<h2>프로젝트 실행하기</h2>
<p>프로젝트를 실행시키기 위해서는 <code>run</code> 커맨드를 사용하면 된다. 예를 들어 실행시킬 엔트리포인트 파일이 <code>main.py</code>라면 아래와 같은 식이다.</p>
<pre><code class="language-bash">poetry run python main.py
</code></pre>
<p>이 경우 해당 프로젝트의 virtualenv 환경에서 <code>run</code> 뒤의 커맨드가 실행되는 식이다.</p>
<h2>virtualenv 셸 얻기</h2>
<p>프로젝트의 virtualenv 환경에서 여러 가지를 시험해 보기 위해 셸을 얻고 싶다면 단순하게 <code>shell</code> 커맨드를 사용하면 된다.</p>
<pre><code class="language-bash">poetry shell
</code></pre>
<h2>Docker와 Poetry</h2>
<p>Poetry의 특징은 virtualenv 환경을 자동으로 통합하는 것이다. 그리고 Docker 컨테이너는 프로젝트 단위로 독립된 환경을 구축하려는 의도가 있다. 결과적으로 해당 프로젝트를 Docker 컨테이너 내에서 돌린다면 Poetry의 virtualenv 환경 통합 기능은 불필요할 수도 있다.</p>
<p>그럴 때는 간단하게 아래 커맨드로 virtualenv 환경을 생성하지 않도록 설정해 줄 수 있다.</p>
<pre><code class="language-bash">poetry config virtualenvs.create false
</code></pre>
<p>위 커맨드는 Poetry의 virtualenv를 비활성화 시키므로 <code>Dockerfile</code> 등에 <code>poetry install</code> 커맨드를 실행하기 전에 동작하도록 작성하면 될 것 같다.</p>
<h2>기타</h2>
<p>Poetry 자체를 업그레이드 하려면 <code>self update</code> 커맨드를 사용해 보자.</p>
<pre><code class="language-python">poetry self update
</code></pre>
<p>다만 Homebrew 등의 다른 패키지 매니저를 통해 Poetry를 설치했다면 위 커맨드를 신경 쓸 필요는 없을 것 같다.</p>
      </section>
    </div>
    <div class="splitter-container">
      <hr/>
    </div>
    <!-- RefInfos -->
    
      <div class="refinfo-container">
        <div class="navinfo-container">
          
          
            <div class="refinfo-cluster">
              <h2>비슷한 주제의 글들</h2>
              <ul>
                
                  <li>
                    <a href="../article/python-markdown-extract-links.html">Python-Markdown으로 마크다운 문서의 모든 링크 주소 추출하기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-markdown-meta.html">Python-Markdown에서 문서의 메타 데이터 추출하기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-markdown-weird-code-block.html">Python-Markdown에서 이상한 코드 블럭 렌더링 바로잡기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-markdown.html">파이썬으로 마크다운 문서를 HTML로 변환하기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-home-dir.html">파이썬에서 홈 디렉토리 경로 처리하기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-get-file-infomations.html">파이썬에서 파일 정보 얻기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-list-dir.html">파이썬으로 파일 및 디렉터리 목록 구하기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-file-dir-exists.html">파이썬에서 파일이나 디렉터리 구분 및 존재 확인하기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-path-tips.html">파이썬으로 파일이나 디렉터리 경로 다루기</a>
                  </li>
                
                  <li>
                    <a href="../article/python-f-string.html">파이썬의 F-String 간단 정리</a>
                  </li>
                
                  <li>
                    <a href="../article/python-bitstring.html">파이썬 bitstring 패키지 소개</a>
                  </li>
                
                  <li>
                    <a href="../article/python-simple-web-server.html">간단한 파이썬 웹 서버</a>
                  </li>
                
                  <li>
                    <a href="../article/python-filter-and-map.html">파이썬의 Filter와 Map 그리고 List Comprehension</a>
                  </li>
                
              </ul>
            </div>
          
          
        </div>
      </div>
    
    <!-- Bottom AD -->
    <div class="mid-ad-container">
      <ins class="adsbygoogle mid-ad" style="display:block" data-ad-client="ca-pub-1071465863344332" data-ad-slot="4306465772" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    <div class="footer-content">
      <footer>
        Copyright 2019 ~ 2024. Seorenn all rights reserved.
      </footer>
    </div>
  </body>
</html>