<!DOCTYPE html><html lang="ko"><head><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1"><meta http-equiv="Content-Type"content="text/html; charset=UTF-8"><link rel="stylesheet"href="/static/style.min.css"><meta name="battery-savings"content="allow-reduced-framerate allow-reduced-script-speed"><title>Electron + Svelte App 시작하기 - Seorenn Note</title><meta name="twitter:title"content="Electron + Svelte App 시작하기"><meta name="og:title"content="Electron + Svelte App 시작하기"><meta name="description"content="엘렉트론(Electron)과 스벨트(Svelte) 프레임워크를 이용해 데스크톱 앱 개발 환경 구축하기"><meta name="twitter:description"content="엘렉트론(Electron)과 스벨트(Svelte) 프레임워크를 이용해 데스크톱 앱 개발 환경 구축하기"><meta name="og:description"content="엘렉트론(Electron)과 스벨트(Svelte) 프레임워크를 이용해 데스크톱 앱 개발 환경 구축하기"><link rel="canonical"href="https://seorenn.github.io/note/electron-svelte-app.html"><meta property="og:url"content="https://seorenn.github.io/note/electron-svelte-app.html"><link rel="shortcut icon"type="image/x-icon"href="/static/favicon.ico"><meta name="twitter:image"content="https://seorenn.github.io/static/seorenn-symbol.png"><meta property="og:image"content="https://seorenn.github.io/static/seorenn-symbol.png"><meta property="og:image:width"content="520"><meta property="og:image:height"content="329"><meta name="twitter:card"content="summary"><meta name="twitter:site"content="@seorenn"><meta name="twitter:creator"content="@seorenn"><meta property="og:type"content="article"><meta property="og:site_name"content="Seorenn"><meta property="og:locale"content="ko_KR"><meta name="referrer"content="unsafe-url"><meta name="robots"content="follow,index"><meta name="google-site-verification"content="YqTFZuthbvGIlDE1dhxiTjZ3m-GfyNs_rsHaOlPKpug"><meta name="naver-site-verification"content="24609571c04926ab1220d5d02610efa1c9e12221"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1071465863344332"crossorigin="anonymous"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-N5PL2YB2ZH"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-N5PL2YB2ZH")</script><script type="text/javascript"src="/static/script.min.js"></script></head><body><div class="header-content"><header class="top-header"><div class="logo-container"><span class="vertical-center-helper"></span> <a href="/"title="Seorenn"><img class="site-logo"src="/static/seorenn-note-logo-light.png"alt="Seorenn Note"></a><nav><span class="vertical-center-helper"></span> <a href="/"title="Home">HOME</a> | <a href="/note"title="All Notes">NOTES</a> | <a href="https://seorenn.tistory.com"title="Blog"target="_blank">LOGS</a></nav></div></header></div><div class="content-container"><section class="content"><div class="mid-ad-container"><ins class="adsbygoogle mid-ad"style="display:block"data-ad-client="ca-pub-1071465863344332"data-ad-slot="4306465772"data-ad-format="auto"data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><header><h1>Electron + Svelte App 시작하기</h1><div class="title-date">2022년 4월 23일 수정</div></header><div id="table-of-contents"role="doc-toc"><h2 onclick="toggleToc()">≡ 목차 (Table of Contents)</h2><div id="text-table-of-contents"style="display:none"role="doc-toc"><ul><li><a href="#df34fda3">Svelte 프로젝트 생성하기</a></li><li><a href="#9a055a8b">Electron 추가하기</a></li><li><a href="#2bbdb230">시험해보기</a></li><li><a href="#095426f7">electron-reload 지원해보기</a></li><li><a href="#b1de21ea">자동 빌드 문제 해결하기</a></li><li><a href="#9bd0b725">vscode에서 간편하게 실행시키기</a></li></ul></div></div><p>이 글은 Svelte 프레임워크를 이용해 <a href="electron.html">Electron</a> 앱을 개발하기 위한 가장 기본적인 부분들을 만들어가는 과정을 설명한다.</p><div id="outline-container-df34fda3"class="outline-2"><h2 id="df34fda3">Svelte 프로젝트 생성하기</h2><div class="outline-text-2"id="text-df34fda3"><p>Svelte 프로젝트 템플릿은 <a href="npx.html">npx</a>로 간단하게 설정할 수 있다.</p><div class="org-src-container"><pre class="src src-bash">npx degit sveltejs/template PROJECT_NAME
<span style="color:#ecbe7b">cd</span> PROJECT_NAME
yarn  <span style="color:#5b6268"># </span><span style="color:#5b6268">or npm install</span>
</pre></div></div></div><div id="outline-container-9a055a8b"class="outline-2"><h2 id="9a055a8b">Electron 추가하기</h2><div class="outline-text-2"id="text-9a055a8b"><p>의존성 추가는 <a href="electron-basic-setup.html">Electron 셋업하기</a> 글을 참고하자. 의존성을 추가하고 <code>index.js</code> 파일을 추가하고 <code>start</code> 스크립트를 수정하는 모든 부분이 필요하다.</p><p>의존성을 추가한 후 Svelte 템플릿을 설치할 때 생긴 <code>public/index.html</code> 파일을 열어서 각 리소스 및 스크립트 파일들 경로를 상대 경로로 수정해주자. <code>globa.css</code>, <code>build.css</code>, <code>bundle.js</code> 파일의 경로에서 제일 앞의 <code>/</code> 를 빼주기만 하면 된다. 수정된 내용은 아래와 같은 식이다.</p><div class="org-src-container"><pre class="src src-html">&lt;<span style="color:#51afef">!DOCTYPE</span> html&gt;
&lt;<span style="color:#c678dd">html</span> <span style="color:#dcaeea">lang</span>=<span style="color:#98be65">"ko"</span>&gt;
&lt;<span style="color:#c678dd">head</span>&gt;
  &lt;<span style="color:#c678dd">meta</span> <span style="color:#dcaeea">charset</span>=<span style="color:#98be65">'utf-8'</span>&gt;
  &lt;<span style="color:#c678dd">meta</span> <span style="color:#dcaeea">name</span>=<span style="color:#98be65">'viewport'</span> <span style="color:#dcaeea">content</span>=<span style="color:#98be65">'width=device-width,initial-scale=1'</span>&gt;

  &lt;<span style="color:#c678dd">title</span>&gt;<span style="font-weight:700;text-decoration:underline">Seonews</span>&lt;/<span style="color:#c678dd">title</span>&gt;

  &lt;<span style="color:#c678dd">link</span> <span style="color:#dcaeea">rel</span>=<span style="color:#98be65">'icon'</span> <span style="color:#dcaeea">type</span>=<span style="color:#98be65">'image/png'</span> <span style="color:#dcaeea">href</span>=<span style="color:#98be65">'/favicon.png'</span>&gt;

  <span style="color:#5b6268">&lt;!-- </span><span style="color:#5b6268">&#49688;&#51221;&#46108; &#53076;&#46300; 1</span><span style="color:#5b6268"> --&gt;</span>
  &lt;<span style="color:#c678dd">link</span> <span style="color:#dcaeea">rel</span>=<span style="color:#98be65">'stylesheet'</span> <span style="color:#dcaeea">href</span>=<span style="color:#98be65">'global.css'</span>&gt;

  <span style="color:#5b6268">&lt;!-- </span><span style="color:#5b6268">&#49688;&#51221;&#46108; &#53076;&#46300; 2</span><span style="color:#5b6268"> --&gt;</span>
  &lt;<span style="color:#c678dd">link</span> <span style="color:#dcaeea">rel</span>=<span style="color:#98be65">'stylesheet'</span> <span style="color:#dcaeea">href</span>=<span style="color:#98be65">'build/bundle.css'</span>&gt;

  <span style="color:#5b6268">&lt;!-- </span><span style="color:#5b6268">&#49688;&#51221;&#46108; &#53076;&#46300; 3</span><span style="color:#5b6268"> --&gt;</span>
  &lt;<span style="color:#c678dd">script</span> defer <span style="color:#dcaeea">src</span>=<span style="color:#98be65">'build/bundle.js'</span>&gt;&lt;/<span style="color:#c678dd">script</span>&gt;
&lt;/<span style="color:#c678dd">head</span>&gt;

&lt;<span style="color:#c678dd">body</span>&gt;
&lt;/<span style="color:#c678dd">body</span>&gt;
&lt;/<span style="color:#c678dd">html</span>&gt;
</pre></div></div></div><div id="outline-container-2bbdb230"class="outline-2"><h2 id="2bbdb230">시험해보기</h2><div class="outline-text-2"id="text-2bbdb230"><p>가장 기본적인 부분이 셋업되었기 때문에 이제 실행이 가능하다. 아래 커맨드로 실행시켜보자.</p><div class="org-src-container"><pre class="src src-bash">yarn run start
<span style="color:#5b6268"># </span><span style="color:#5b6268">or</span>
npm run start
</pre></div><p>Hello World 느낌이 나는 화면이 뜨면 정상이다. 혹시나 빈 화면이 뜨면 Inspector(<code>Command+Option+I</code>)를 열어서 콘솔의 메시지를 살펴보면 도움이 될 때가 있다.</p></div></div><div id="outline-container-095426f7"class="outline-2"><h2 id="095426f7">electron-reload 지원해보기</h2><div class="outline-text-2"id="text-095426f7"><p>파일을 수정할 때마다 <a href="electron.html">Electron</a>을 띄우는 것은 귀찮다. 물론 <code>Command+R</code> 이나 <code>F5</code> 키로 리프레시가 가능하다지만 이조차도 귀찮다면 <code>electron-reload</code> 를 설정하는 것도 한 방법이다.</p><div class="org-src-container"><pre class="src src-bash">yarn add -D electron-reload
<span style="color:#5b6268"># </span><span style="color:#5b6268">or</span>
npm install --save-dev electron-reload
</pre></div><p>당연하겠지만 개발시에만 사용하므로 프로던션 의존성에는 들어가지 않도록 설치하는 명령이다.</p><p>이제 이를 로드하도록 <code>index.js</code> 를 열어서 코딩해보자. 아래 코드를 상단 적절한 위치에 넣어두자. 개인적으로는 import(require) 이후에 넣는걸 선호한다.</p><div class="org-src-container"><pre class="src src-javascript"><span style="color:#51afef">var</span> <span style="color:#dcaeea">devMode</span> = process.env.DEV_MODE ? (process.env.DEV_MODE.trim() == <span style="color:#98be65">"true"</span>) : <span style="color:#a9a1e1">false</span>;

<span style="color:#51afef">if</span> (devMode) {
    require(<span style="color:#98be65">'electron-reload'</span>)(__dirname, {
        electron: upath.toUnix(upath.join(__dirname, <span style="color:#98be65">'node_modules'</span>, <span style="color:#98be65">'.bin'</span>, <span style="color:#98be65">'electron'</span>))
    });
}
</pre></div><p>이 코드는 <code>DEV_MODE</code> 라는 환경변수가 <code>true</code> 로 세팅되어야 <code>electron-reload</code> 가 작동하도록 하는 코드다. 따라서 이 부분도 적용되어야 할 것이다. <code>package.json</code> 을 열어서 <code>scripts</code> 항목의 <code>start</code> 부분을 수정해주자.</p><div class="org-src-container"><pre class="src src-javascript"><span style="color:#98be65">"start"</span>: <span style="color:#98be65">"DEV_MODE=true electron ."</span>
</pre></div><p>이러면 실행시킬 때 <code>electron-reload</code> 가 동작한다. 물론 원하는 이름의 스크립트에 넣어도 관계는 없다.</p></div></div><div id="outline-container-b1de21ea"class="outline-2"><h2 id="b1de21ea">자동 빌드 문제 해결하기</h2><div class="outline-text-2"id="text-b1de21ea"><p>불행히도 <code>electron-reload</code> 만으론 리로드가 완벽하게 되지 않는다. 일부 코드는 빌드가 필요하기 때문이다. 그렇다면 자동으로 빌드가 되게 만들어야 한다. 기본적으로 <code>dev</code> 스크립트가 빌드를 하는 명령이니 이걸 호출할 수 있게 해야 한다.</p><p>우선 <code>wait-on</code> 과 <code>concurrently</code> 의존성을 개발 전용으로 설치한다.</p><div class="org-src-container"><pre class="src src-bash">yarn add -D wait-on concurrently
<span style="color:#5b6268"># </span><span style="color:#5b6268">or</span>
npm install --save-dev wait-on concurrently
</pre></div><p>그리고 <code>package.json</code> 의 <code>scripts</code> 들에서 아래와 같은 항목들을 수정한다.</p><div class="org-src-container"><pre class="src src-bash"><span style="color:#98be65">"start"</span>: <span style="color:#98be65">"sirv public --no-clear"</span>,
<span style="color:#98be65">"electron"</span>: <span style="color:#98be65">"wait-on http://localhost:5000 &amp;&amp; electron ."</span>,
<span style="color:#98be65">"electron-dev"</span>: <span style="color:#98be65">"DEV_NODE=true concurrently \"yarn run dev\" \"yarn run electron\""</span>,
</pre></div><p>이제 개발용으로 쓸 새로운 <code>electron-dev</code> 스크립트 명령을 만들었다. 아래와 같이 실행시켜서 시험해보자.</p><div class="org-src-container"><pre class="src src-bash">yarn run electron-dev
<span style="color:#5b6268"># </span><span style="color:#5b6268">or</span>
npm run electron-dev
</pre></div><p>개인적으론 대부분의 자동화가 잘 되었지만 간혹 뭔가 빠지는 느낌인데 그럴땐 어쩔 수 없이 <a href="electron.html">Electron</a> 창에서 <code>Command+R</code> 키 등을 눌러서 직접 리프레시를 해주어야 한다. 그래도 네이티브 앱 개발 시에 비하면 순식간에 재로딩이 되니 큰 불만은 없다.</p></div></div><div id="outline-container-9bd0b725"class="outline-2"><h2 id="9bd0b725">vscode에서 간편하게 실행시키기</h2><div class="outline-text-2"id="text-9bd0b725"><p><code>launch.json</code> 파일을 생성해서 아래와 같이 코딩해 줄 수 있다.</p><div class="org-src-container"><pre class="src src-javascript">{
    <span style="color:#98be65">"version"</span>: <span style="color:#98be65">"0.2.0"</span>,
    <span style="color:#98be65">"configurations"</span>: [{
        <span style="color:#98be65">"name"</span>: <span style="color:#98be65">"Debug Electron"</span>,
        <span style="color:#98be65">"type"</span>: <span style="color:#98be65">"node"</span>,
        <span style="color:#98be65">"request"</span>: <span style="color:#98be65">"launch"</span>,
        <span style="color:#98be65">"cwd"</span>: <span style="color:#98be65">"${workspaceRoot}"</span>,
        <span style="color:#98be65">"runtimeExecutable"</span>: <span style="color:#98be65">"yarn"</span>,
        <span style="color:#98be65">"program"</span>: <span style="color:#98be65">"electron-dev"</span>
    }]
}
</pre></div><p>이후 <a href="vscode.html">vscode</a>의 실행 및 디버그 탭에서 해당 실행 프로파일이 생성된 것을 확인할 수 있고 실행시켜 볼 수 있다. 사실 별로 이상할 것도 없이 위에서 작성한 <code>electron-dev</code> 스크립트를 실행시키는 명령이다. 재실행도 잘 되고 생각보다는 편했다.</p></div></div><div class="mid-ad-container"><ins class="adsbygoogle mid-ad"style="display:block"data-ad-client="ca-pub-1071465863344332"data-ad-slot="4306465772"data-ad-format="auto"data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class="backlinks-container"><hr><h2>이 글을 링크하는 글들</h2><div class="article-link"><div class="article-link-title-block"><h2><a class="article-link-title"href="/note/electron.html">❏ Electron</a></h2><span class="article-description">데스크탑 웹 앱 프레임워크 엘렉트론(Electron)</span><span class="article-link-date"> Updated on 2022년 1월 2일</span></div></div></div></section></div><div class="footer-content"><footer>Copyright 2019 ~ 2020. Seorenn all rights reserved.</footer></div></body></html>