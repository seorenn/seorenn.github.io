<!DOCTYPE html>
<html lang="kr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Python 3 F-string - Seorenn Static Pages</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Heeseung Seo (Seorenn)">
<meta name="description" content="Python 3.6에서 도입된 f-string에 대한 소개 및 사용법 정리하는 글입니다.">
<meta name="keywords" content="python, f-string, format, string, interpolation, 문자열, 삽입, 치환, printf, sprintf">
<meta property="og:title" content="Python 3 F-string" />
<meta property="og:description" content="Python 3.6에서 도입된 f-string에 대한 소개 및 사용법 정리하는 글입니다." />
<meta property="og:type" content="website" />
<meta property="og:image" content="https://seorenn.github.io/img/seorenn-logo.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Python 3 F-string" />
<meta name="twitter:description" content="Python 3.6에서 도입된 f-string에 대한 소개 및 사용법 정리하는 글입니다." />
<meta name="twitter:image" content="https://seorenn.github.io/img/seorenn-logo.png" />
<meta name="twitter:site" content="@seorenn" />
<meta name="twitter:creator" content="@seorenn" />
<link rel="stylesheet" type="text/css" href="/static/style.css"/>
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"/>
<link rel="canonical" href="https://seorenn.github.io/python-3-f-string.html"/>
<link property="og:url" href="https://seorenn.github.io/python-3-f-string.html"/>
<meta name="google-site-verification" content="YqTFZuthbvGIlDE1dhxiTjZ3m-GfyNs_rsHaOlPKpug" />
<meta name="naver-site-verification" content="ebf6a89968fd9f447c1a77d83e2c4aa9bdbb0345"/>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44534026-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-44534026-1');
</script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">Python 3 F-string</h1>
<h2><a href="/">Seorenn Static Pages</a></h2></header>
<div id="outline-container-org4a67b36" class="outline-2">
<h2 id="org4a67b36">이건 뭘까</h2>
<div class="outline-text-2" id="text-org4a67b36">
<p>
현대적인 언어에서는 String Interpolation이라 불리우는 기능들이 있습니다. 쉽게
말해서 이 기능은 문자열 내에 특정 문자열을 집어넣거나 치환시키기 위한
기능입니다.
</p>

<p>
기존의 <a href="python.html">Python</a>의 경우 <code>%</code> 를 이용한 printf식 포매팅이나 <code>format()</code> 을 활용해
치환시키는 방법이 있었습니다.
</p>
<div class="org-src-container">
<pre class="src src-python"><span style="color: #dcaeea;">fs</span> = <span style="color: #98be65;">'%d + %d = %d'</span> % (<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>)
<span style="color: #dcaeea;">fmts</span> = <span style="color: #98be65;">'{} + {} = {}'</span>.<span style="color: #c678dd;">format</span>(<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">2</span>, <span style="color: #da8548; font-weight: bold;">3</span>)
</pre>
</div>
<p>
하지만 이 방법의 문제는 명확했죠. 치환될 위치와
실제로 입력될 값을 다른 위치에 입력하다 보니 결국 눈으로 하나하나 따라가면서
위치를 살펴봐야 했고 그래서 종종 위치를 잘못 넣는 등 실수를 하게 됩니다.
</p>

<p>
F-string은 <a target="_blank" href="https://www.python.org/dev/peps/pep-0498/">PEP-498</a> 제안을 통해
Python 3.6 부터 지원되기 시작한 기능으로 정식 명칭은
Literal String Interpolation 입니다.
이 F-string은 앞서 살펴본 고적적인(?) 포매팅 코딩의 실수를
좀 더 방지해 줄 수 있는 포매팅 방법을 제공합니다.
심지어 아주 새로운 것도 아니고
다른 언어들이 제공하는 것과 상당히 비슷한 방법이라
어색하지도 않게 말이지요.
</p>
</div>
</div>
<div id="outline-container-orgfabc99e" class="outline-2">
<h2 id="orgfabc99e">문법</h2>
<div class="outline-text-2" id="text-orgfabc99e">
<p>
문자열을 표현하는 구문 앞에 <code>f</code> 를 붙이면 쉽게 F-string이 됩니다. 그리고 치환할
내용은 중괄호로 <code>{...}</code> 형식으로 둘러 싸기만 하면 됩니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dcaeea;">name</span> = <span style="color: #98be65;">'Conrad'</span>
&gt;&gt;&gt; <span style="color: #51afef;">print</span>(f<span style="color: #98be65;">'My name is {name}'</span>)
My name <span style="color: #51afef;">is</span> Conrad
</pre>
</div>
<p>
<code>name</code> 이라는 변수를 <code>{name}</code> 이라는 표기만으로 쉽게 문자열 안에 삽입하는 것을
볼 수 있습니다. 마치 ES6나 <a href="swift.html">Swift</a> 의
String Interpolation과 상당히 닮은, 흔하디
흔한 모습임을 알 수 있습니다.
</p>

<p>
따라서 기능적으로도 상당히 비슷하다는 것을 알 수 있습니다. 예를 들어 중괄호 안의
내용은 파이썬 구문으로 그대로 사용할 수 있다는 것을 말이지요.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; f<span style="color: #98be65;">'1 + 2 = {1+2}'</span>
<span style="color: #83898d;">'1 + 2 = 3'</span>
</pre>
</div>
<p>
자 그렇다면 뭐가 더 될까요? 함수 같은 것도 당연히 되겠죠?
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #51afef;">def</span> <span style="color: #c678dd;">makeDouble</span>(v):
...     <span style="color: #51afef;">return</span> v * <span style="color: #da8548; font-weight: bold;">2</span>
...
&gt;&gt;&gt; f<span style="color: #98be65;">'This is doubler! If you enter 10, it returns {makeDouble(10)}'</span>
<span style="color: #98be65;">'This is doubler! If you enter 10, it returns 20'</span>
</pre>
</div>
<p>
어려울 게 없습니다.
</p>

<p>
약같 특수한 문법으로 아래처럼 사용하는 방법도 있습니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dcaeea;">value</span> = <span style="color: #da8548; font-weight: bold;">100</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'{value=}'</span>
<span style="color: #98be65;">'value=100'</span>
</pre>
</div>
<p>
위 문법은 self-documenting 표현식 이라는 주제로 3.8 부터 도입 되었습니다.
</p>
</div>
</div>
<div id="outline-container-org627a7de" class="outline-2">
<h2 id="org627a7de">약간 고전스러운 포매팅</h2>
<div class="outline-text-2" id="text-org627a7de">
<p>
요즘 세상에 잘 쓸 일이 없겠지만, 그래도 C의 printf식 스타일의 포매팅이 간간히 쓰일
때가 있습니다. 예를 들어 년월일을 표현할 때 <code>2019-1-5</code> 보다는 <code>2019-01-05</code> 라는
식으로 자리수를 정확히 표현해 주는 것이 좋을 때도 있습니다. (뭐 선호도의 차이는
당연히 있을 수 있습니다)
</p>

<p>
F-string도 이런 방식의 포매팅을 여전히 지원합니다. 예를 들어
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dcaeea;">value</span> = <span style="color: #da8548; font-weight: bold;">12</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'the value is {value}'</span>
<span style="color: #98be65;">'the value is 12'</span>
</pre>
</div>
<p>
위 코드에서 12를 4자리수로 표현하고 싶다면 아래처럼 할 수 있습니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; f<span style="color: #98be65;">'the value is {value:#04d}'</span>
<span style="color: #83898d;">'the value is 0012'</span>
</pre>
</div>
<p>
데이터나 변수 위헤 <code>:#</code> 으로 시작하는 특수 문법이 등장합니다. 그리고 그 뒤에는
'04d' 라는 것이 적혀있는데, 이는 4자리수의 정수(decimal)를 표현하되 남는
공간에는 0을 채우라는 의미의 포매팅 문법입니다. C 식 포매팅 문법인 <code>%04d</code> 와
거의 동일하지요.
</p>

<p>
비슷하게 살펴봅시다. <code>x</code> 를 사용하면 16진수 출력도 가능합니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; f<span style="color: #98be65;">'the value is {value:#02x}'</span>
<span style="color: #83898d;">'the value is 0xc'</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'the value is {value:#02X}'</span>
<span style="color: #98be65;">'the value is 0XC'</span>
</pre>
</div>
<p>
대소문자 차이를 잘 살펴보세요.
</p>

<p>
실수의 자릿수를 제한하는 문법도 동일하게 표현 가능합니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dcaeea;">fvalue</span> = <span style="color: #da8548; font-weight: bold;">123456.654321</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'simple value = {fvalue:#.2f}'</span>
<span style="color: #98be65;">'simple value = 123456.65'</span>
</pre>
</div>
<p>
C에 익숙한 아재라면 (&#x2026;) 뭐&#x2026; 익숙하시겠네요. 네 저도 익숙합니다.
</p>

<p>
포맷팅 문법도 자기 자신 표현식에서 사용할 수 있습니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dcaeea;">value</span> = <span style="color: #da8548; font-weight: bold;">100</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'{value=:#10d}'</span>
<span style="color: #98be65;">'value=       100'</span>
</pre>
</div>
<p>
뭔가 가독성은 마음에 안 들지만 애초에 이 기능은 로그 메시지 작성을 제외하곤 많이 쓰일 것 같지는 않기도 하네요.
</p>
</div>
</div>
<div id="outline-container-orgc4fef1b" class="outline-2">
<h2 id="orgc4fef1b">주의점</h2>
<div class="outline-text-2" id="text-orgc4fef1b">
<p>
F-string의 중괄호 내부에서는 백슬래시를 쓸 수 없습니다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #98be65;">'the \'back-slash\' string'</span>
<span style="color: #83898d;">"the 'back-slash' string"</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'the \'back-slash\' string'</span>
<span style="color: #98be65;">"the 'back-slash' string"</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'the {\'back-slash\'} string'</span>
  File <span style="color: #98be65;">"&lt;stdin&gt;"</span>, line <span style="color: #da8548; font-weight: bold;">1</span>
<span style="color: #ECBE7B;">SyntaxError</span>: f-string expression part cannot include a backslash
</pre>
</div>
<p>
위에서 3번째 예제의 경우는 상당히 표현하기 난감한 방식이긴 합니다. 굳이 쓸
이유는 잘 없겠지만, 위와 같이 표현해야 할 일이 있다면 다른 변수에 적당히 넣어서
써 봅시다.
</p>
<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span style="color: #dcaeea;">bsstr</span> = <span style="color: #98be65;">"'back-slash'"</span>
&gt;&gt;&gt; f<span style="color: #98be65;">'the {bsstr} string'</span>
<span style="color: #98be65;">"the 'back-slash' string"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org91aba93" class="outline-2">
<h2 id="org91aba93">관련글</h2>
<div class="outline-text-2" id="text-org91aba93">
<ul class="org-ul">
<li><a href="python.html">Python</a></li>
<li><a href="python-update-log.html">Python 버전별 업데이트 내역</a></li>
</ul>
</div>
</div>
<div id="footer"><div id="time">2020년 01월 06일 마지막으로 수정됨</div><div id="copyright">Copyright 2019 Heeseung Seo (Seorenn)</div></div></div>
</body>
</html>
