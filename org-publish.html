<!DOCTYPE html>
<html lang="kr">
<head>
<!-- 2019-11-10 Sun 21:32 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>org-publish - Seorenn</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Heeseung Seo (Seorenn)">
<link rel="stylesheet" type="text/css" href="/static/style.css"/>
<meta name="google-site-verification" content="YqTFZuthbvGIlDE1dhxiTjZ3m-GfyNs_rsHaOlPKpug" />
<meta name="naver-site-verification" content="ebf6a89968fd9f447c1a77d83e2c4aa9bdbb0345"/>
</head>
<body>
<div id="content">
<header>
<h1 class="title">org-publish</h1>
<h2><a href="/">by Seorenn</a></h2></header><p>
org-publish는 Emacs에서 org-mode로 작성된 .org 문서들로 정적 웹사이트를 만들 수 있게
해주는 도구입니다. 쉽게 말해서 특정 디렉토리 안의 .org 파일들을 .html 파일로
익스포트 해서 원하는 디렉토리로 복사해줍니다. 그리고 각종 css나 스크립트, 이미지
등의 파일도 자동으로 복사할 수 있게 도와줍니다.
</p>

<p>
org-publish 를 어떻게 설정하고 사용하는지 살펴봅시다.
</p>

<div id="outline-container-orge0ca487" class="outline-2">
<h2 id="orge0ca487">시작하기</h2>
<div class="outline-text-2" id="text-orge0ca487">
<p>
일단 아래와 같은 디렉토리에서 글을 쓴다고 가정합시다.
</p>
<div class="org-src-container">
<pre class="src src-text">~/org/
    static/
        style.css
    img/
        someimage.jpg
    index.org
    foobar.org
    ...
</pre>
</div>
<p>
이 가정에서는 <code>~/org</code> 라는 디렉토리에서 .org 파일로 글을 작성합니다. 그리고 <code>~/org/static</code> 에는
스타일 파일과 미래에 사용할지도 모를 자바스크립트 파일 등을 넣을 예정입니다.
<code>~/org/img</code> 디렉토리는 이름처럼 이미지만 넣을 에정입니다.
</p>

<p>
이 상태로 쓴 글을 아래와 같은 디렉토리 구조로 익스포트 하려는 것을 목적이라 생각해봅시다.
</p>
<div class="org-src-container">
<pre class="src src-text">~/web/
    static/
        style.css
    img/
        someimage.jpg
    index.html
    foobar.html
    ...
</pre>
</div>
<p>
그냥 .org 파일이 .html로 바뀐거 빼곤 이름과 배치가 동일합니다. 이대로 원하는
서버에 올리면 그대로 정적 웹사이트가 서빙되겠네요.
</p>

<p>
위의 목적에 맞게 설정을 해 봅시다.
</p>
</div>
</div>
<div id="outline-container-org48fc8e9" class="outline-2">
<h2 id="org48fc8e9">필요한 모듈들</h2>
<div class="outline-text-2" id="text-org48fc8e9">
<p>
org-publish는 다행히도 별도로 설치할 필요가 없는 확장입니다. Emacs 에 빌트인
되어있기 때문입니다. 단지 몇 가지 모듈은 자동으로 로딩되지 않기 때문에 수동으로
로드해야 됩니다..
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">ox-publish</span>)
(<span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">ox-html</span>)
(<span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">ox-rss</span>)
</pre>
</div>
<p>
여기서 마지막의 <code>ox-rss</code> 모듈은 RSS를 만들기 위한 것이 아니면 필요가 없는데 나중에
필요할지도 몰라서 일단 넣어둔 상태입니다.
</p>

<p>
물론 이걸로는 아무것도 된 것이 없습니다. 이제 거대한 설정 스크립트를 작성해야 합니다.
</p>
</div>
</div>
<div id="outline-container-orga846f5c" class="outline-2">
<h2 id="orga846f5c">기본 설정</h2>
<div class="outline-text-2" id="text-orga846f5c">
<p>
<code>org-publish-project-alist</code> 라는 리스트가 org-publish 의 핵심입니다.
아래는 위의 목적대로 동작하도록 설정하는 스크립트입니다.
</p>
<div class="org-src-container">
<pre class="src src-lisp">(setq org-publish-project-alist
      '((<span style="color: #98be65;">"doc"</span>
         <span style="color: #c678dd;">:base-directory</span> <span style="color: #98be65;">"~/org"</span>
         <span style="color: #c678dd;">:base-extension</span> <span style="color: #98be65;">"org"</span>

         <span style="color: #c678dd;">:publishing-directory</span> <span style="color: #98be65;">"~/web/"</span>

         <span style="color: #c678dd;">:recursive</span> t

         <span style="color: #c678dd;">:with-toc</span> nil
         <span style="color: #c678dd;">:with-title</span> t
         <span style="color: #c678dd;">:with-date</span> t
         <span style="color: #c678dd;">:section-numbers</span> nil
         <span style="color: #c678dd;">:html-doctype</span> <span style="color: #98be65;">"html5"</span>
         <span style="color: #c678dd;">:html-html5-fancy</span> t
         <span style="color: #c678dd;">:html-head-include-default-style</span> nil
         <span style="color: #c678dd;">:html-head-include-scripts</span> nil
         <span style="color: #c678dd;">:htmlized-source</span> t
         )
        (<span style="color: #98be65;">"static"</span>
         <span style="color: #c678dd;">:base-directory</span> <span style="color: #98be65;">"~/org/static"</span>
         <span style="color: #c678dd;">:base-extension</span> <span style="color: #98be65;">"css\\|js\\|png\\|jpg\\|jpeg\\|gif"</span>
         <span style="color: #c678dd;">:publishing-directory</span> <span style="color: #98be65;">"~/web/static"</span>
         <span style="color: #c678dd;">:recursive</span> t
         <span style="color: #c678dd;">:publishing-function</span> org-publish-attachment)
        (<span style="color: #98be65;">"img"</span>
         <span style="color: #c678dd;">:base-directory</span> <span style="color: #98be65;">"~/org/img"</span>
         <span style="color: #c678dd;">:base-extension</span> <span style="color: #98be65;">"png\\|jpg\\|jpeg\\|gif"</span>
         <span style="color: #c678dd;">:publishing-directory</span> <span style="color: #98be65;">"~/web/img"</span>
         <span style="color: #c678dd;">:recursive</span> t
         <span style="color: #c678dd;">:publishing-function</span> org-publish-attachment)
        (<span style="color: #98be65;">"web"</span> <span style="color: #c678dd;">:components</span> (<span style="color: #98be65;">"doc"</span> <span style="color: #98be65;">"static"</span> <span style="color: #98be65;">"img"</span>))))
</pre>
</div>
<p>
위 설정에는 3가지 분류가 있습니다. <code>doc</code>, <code>static</code>, <code>img</code> 세 가지고 이를 하나의
그룹으로 묶는 <code>web</code> 이 있습니다. 이 이름들은 딱히 정해진 규칙은 없고 그냥 제
멋대로 지은 것들입니다.
</p>

<p>
<code>doc</code> 의 내용은 .org 파일들이 위치하는 디렉토리를 어떤 규칙으로 처리하는지에
대한 설정입니다. <code>base-extension</code> 에 명시된 확장자의 파일들을
<code>publishing-directory</code> 에 익스포트합니다. <code>htmlized-source</code> 가 <code>nil</code> 이 아니기
때문에 익스포트는 html 형식으로 하게 됩니다.
</p>

<p>
나머지 <code>static</code> 과 <code>img</code> 의 내용은 특정한 확장자의 파일들을 그대로 복사하도록
하기 위한 규칙들입니다.
</p>
</div>
</div>
<div id="outline-container-orgaed45bb" class="outline-2">
<h2 id="orgaed45bb">Publish 해보기</h2>
<div class="outline-text-2" id="text-orgaed45bb">
<p>
편챁을 하기 위해서는 <code>org-publish-all</code> 함수를 호출하면 됩니다.
일반 Emacs 라면 <code>M-x org-publish-all</code> 로 실행시키거나, 혹은 Doom Emacs 라면
<code>SPC : org-publish-all</code> 로 실행시키면 된다. Spacemacs 일 경우에는 <code>SPC SPC
org-publish-all</code> 로 실행시킬 수 있씁니다.
</p>

<p>
별 문제가 없다면 이 명령 만으로 목적대로 원하는 디렉토리에 html과 함께 정적
파일들도 복사될 것입니다.
</p>

<hr>

<p>
관련글:
</p>
<ul class="org-ul">
<li><a href="./org-publish-tips.html">org-publish 팁 모음</a></li>
<li><a target="_blank" href="https://orgmode.org/manual/Publishing.html">org-publish 공식 매뉴얼</a></li>
<li><a href="./doom-emacs.html">Doom Emacs</a></li>
</ul>
</div>
</div>
<div id="footer"><div id="time">2019년 11월 10일 마지막으로 수정됨</div><div id="copyright">Copyright 2019 Heeseung Seo (Seorenn)</div></div></div>
</body>
</html>
