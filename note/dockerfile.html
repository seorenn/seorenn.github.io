<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="/static/style.css" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
<title>Dockerfile - Seorenn Note</title>
<meta name="twitter:title" content="Dockerfile" />
<meta name="og:title" content="Dockerfile" />
<meta name="description" content="Dockerfile(ë„ì»¤ ì„¤ì •íŒŒì¼) ì˜ˆì œ ëª‡ ê°€ì§€ë¥¼ ì •ë¦¬í•˜ëŠ” ê¸€" />
<meta name="twitter:description" content="Dockerfile(ë„ì»¤ ì„¤ì •íŒŒì¼) ì˜ˆì œ ëª‡ ê°€ì§€ë¥¼ ì •ë¦¬í•˜ëŠ” ê¸€" />
<meta name="og:description" content="Dockerfile(ë„ì»¤ ì„¤ì •íŒŒì¼) ì˜ˆì œ ëª‡ ê°€ì§€ë¥¼ ì •ë¦¬í•˜ëŠ” ê¸€" />
<link rel="canonical" href="https://seorenn.github.io/note/dockerfile.html" />
<meta property="og:url" content="https://seorenn.github.io/note/dockerfile.html" />
<link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico" />
<meta name="twitter:image"content="https://seorenn.github.io/static/seorenn-symbol.png" />
<meta property="og:image" content="https://seorenn.github.io/static/seorenn-symbol.png" />
<meta property="og:image:width" content="520" />
<meta property="og:image:height" content="329" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@seorenn" />
<meta name="twitter:creator" content="@seorenn" />
<meta property="og:type" content="article" />
<meta property="og:site_name" content="Seorenn" />
<meta property="og:locale" content="ko_KR" />
<meta name="referrer" content="unsafe-url" />
<meta name="robots" content="follow,index" />
<meta name="google-site-verification" content="YqTFZuthbvGIlDE1dhxiTjZ3m-GfyNs_rsHaOlPKpug" />
<meta name="naver-site-verification" content="ebf6a89968fd9f447c1a77d83e2c4aa9bdbb0345" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script data-ad-client="ca-pub-1071465863344332" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
<div class="content-container">
<div class="left-empty"></div>
<div class="header-content">
<header class="top-header">
<div class="logo-container">
<a href="/" title="Seorenn"><img class="site-logo" src="/static/seorenn-logo.png" /></a>
<nav>
<a href="/" title="Home"><i class="material-icons md-light">home</i></a>
<a href="/post" title="Post"><i class="material-icons md-light">subject</i></a>
 <a href="/note" title="Note"><i class="material-icons md-light">list_alt</i></a>
 <a href="/log" title="Log"><i class="material-icons md-light">portrait</i></a>
</nav>
</div>
</header>
<hr/>
</div>
<div class="side-ad-container"></div>
</div>
<div class="content-container">
<div class="left-empty">
</div>
<section class="content">
<header>
<h1>Dockerfile</h1>
<div class="title-date">2020ë…„ 6ì›” 4ì¼ ìˆ˜ì •</div>
</header>
<div id="table-of-contents">
<h2>â‰¡ ëª©ì°¨ (Table of Contents)</h2><div id="text-table-of-contents">
<ul>
<li><a href="#39a2e4c2">í‰ë²”í•œ ìŠ¤í™ ì˜ˆì œ</a></li>
<li><a href="#28af54f1">ì‚¬ìš©ì ì§€ì •</a></li>
<li><a href="#5d5e8bc1">Health Checking</a></li>
<li><a href="#67358999">Multi Stage Building</a></li>
<li><a href="#0bbb90e1">ì™¸ë¶€ ë§í¬</a></li>
</ul>
</div>
</div>
<p>
Dockerfileì€ <a href="docker.html">Docker</a> ìš© ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ
íŠ¹ìˆ˜í•œ DSL ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ë¡œ ì‘ì„±í•˜ëŠ” ìŠ¤í™ íŒŒì¼ì´ë‹¤.
</p>

<div id="outline-container-39a2e4c2" class="outline-2">
<h2 id="39a2e4c2">í‰ë²”í•œ ìŠ¤í™ ì˜ˆì œ</h2>
<div class="outline-text-2" id="text-39a2e4c2">
<div class="org-src-container">
<pre class="src src-dockerfile"><span style="color: #51afef;">FROM</span> <span style="color: #ECBE7B; font-weight: bold;">debian:buster</span>

<span style="color: #51afef;">RUN</span> apt-get update &amp;&amp; <span style="color: #98be65;">\</span>
    apt-get install -y build-essential python-dev python-pip

<span style="color: #51afef;">ADD</span> . /app

<span style="color: #51afef;">RUN</span> cd /app &amp;&amp; <span style="color: #98be65;">\</span>
    make &amp;&amp; <span style="color: #98be65;">\</span>
    make install &amp;&amp; <span style="color: #98be65;">\</span>
    pip install -r requirements.txt

<span style="color: #51afef;">ENV</span> APP_NAME <span style="color: #98be65;">"sample"</span>
<span style="color: #51afef;">ENV</span> APP_VERSION <span style="color: #98be65;">"1.0"</span>

<span style="color: #51afef;">ENTRYPOINT</span> [<span style="color: #98be65;">"/usr/local/bin/app"</span>]
</pre>
</div>
<p>
ì´ ì´ë¯¸ì§€ëŠ” <code>debian:buster</code> ë¼ëŠ” ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆì—ì„œ
ëª‡ ê°€ì§€ ë¹Œë“œì— í•„ìš”í•œ ë„êµ¬ë“¤ê³¼ íŒŒì´ì¬ ë„êµ¬ë“¤ì„ ì„¤ì¹˜í•œ í›„
ì‹¤ì œ ì•±ì„ ë¹Œë“œí•˜ê³  ì‹¤í–‰ì‹œí‚¤ëŠ” ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆë‹¤.
</p>

<p>
<code>RUN</code> ì»¤ë§¨ë“œë¥¼ ì—¬ëŸ¬ ì¤„ì— ë‚˜ëˆ„ì–´ì„œ ì ì–´ë„ ê´€ê³„ ì—†ì§€ë§Œ,
ê¸¸ì´ì— í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì— ì´ëŸ° ì‹ìœ¼ë¡œ í•œ ì¤„ì— ëª°ì•„ì„œ ì ëŠ” í˜•íƒœë¥¼ ë§ì´ë“¤ ì‚¬ìš©í•œë‹¤.
</p>

<p>
<code>ADD</code> ëŠ” í˜„ì¬ ë¹Œë“œê°€ ì§„í–‰ë˜ê³  ìˆëŠ” ë””ë ‰í„°ë¦¬ì˜ ë‚´ìš©ë¬¼ì„ ì´ë¯¸ì§€ì— ëª½ë•… ë³µì‚¬í•œë‹¤.
ì–´ì©Œë©´ ê°€ì¥ ì¤‘ìš”í•œ ëª…ë ¹ì´ë‹¤.
</p>

<p>
<code>ENTRYPOINT</code> ëŠ” ì‹¤ì œë¡œ ì´ë¯¸ì§€ê°€ ê¸°ë™ ë˜ë©´ ì‹¤í–‰ë˜ëŠ” ì…¸ ì»¤ë§¨ë“œë¥¼ ê¸°ì…í•˜ëŠ” ê³³ì´ë‹¤.
ì´ê²ƒ ëŒ€ì‹  <code>CMD</code> ë¡œ ê¸°ì…í•  ìˆ˜ë„ ìˆë‹¤.
ë‹¤ë§Œ <code>CMD</code> ëŠ” <code>ENTRYPOINT</code> ì™€ ë¹„êµí•´ì„œ í•œ ê°€ì§€ íŠ¹ì´ì ì´ ìˆëŠ”ë°,
ë§Œì•½ ì‚¬ìš©ì ì»¤ë§¨ë“œê°€ ì§€ì •ë˜ë©´ <code>CMD</code> ë¡œ ëª…ì‹œí•œ ëª…ë ¹ì–´ëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
ë°˜ë©´ <code>ENTRYPOINT</code> ëŠ” ì‚¬ìš©ìì˜ ì»¤ë§¨ë“œë¥¼ ë¬´ì‹œí•˜ê³  ì‹¤í–‰ëœë‹¤.
</p>
</div>
</div>
<div id="outline-container-28af54f1" class="outline-2">
<h2 id="28af54f1">ì‚¬ìš©ì ì§€ì •</h2>
<div class="outline-text-2" id="text-28af54f1">
<p>
íŠ¹ì • ì‚¬ìš©ìë¡œ êµ´ë¦¬ê³ (?) ì‹¶ë‹¤ë©´ <code>USER</code> ì»¤ë§¨ë“œë¥¼ ì“¸ ìˆ˜ ìˆë‹¤.
</p>
<div class="org-src-container">
<pre class="src src-dockerfile"><span style="color: #51afef;">RUN</span> groupadd -r someuser
<span style="color: #51afef;">RUN</span> useradd -m -r -g someuser someuser
<span style="color: #51afef;">USER</span> someuser
</pre>
</div>
<p>
ì»¨í…Œì´ë„ˆê°€ root ìœ ì € ê¸°ë°˜ìœ¼ë¡œ ëŒì•„ê°€ë‹ˆ êº¼ë¦´ ê²Œ ì—†ë‹¤.
</p>
</div>
</div>
<div id="outline-container-5d5e8bc1" class="outline-2">
<h2 id="5d5e8bc1">Health Checking</h2>
<div class="outline-text-2" id="text-5d5e8bc1">
<div class="org-src-container">
<pre class="src src-dockerfile"><span style="color: #51afef;">HEALTHCHECK</span> --<span style="color: #dcaeea;">interval</span>=5s <span style="color: #98be65;">\</span>
            --<span style="color: #dcaeea;">timeout</span>=5s <span style="color: #98be65;">\</span>
            --<span style="color: #dcaeea;">retries</span>=<span style="color: #da8548; font-weight: bold;">6</span> <span style="color: #98be65;">\</span>
            CMD curl -fs http://localhost:1234/ || <span style="color: #51afef;">exit</span> <span style="color: #da8548; font-weight: bold;">1</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-67358999" class="outline-2">
<h2 id="67358999">Multi Stage Building</h2>
<div class="outline-text-2" id="text-67358999">
<div class="org-src-container">
<pre class="src src-dockerfile"><span style="color: #51afef;">FROM</span> <span style="color: #ECBE7B; font-weight: bold;">someimage</span> AS <span style="color: #a9a1e1; font-weight: bold;">stage1</span>
...

<span style="color: #51afef;">FROM</span> <span style="color: #ECBE7B; font-weight: bold;">stage1</span> AS <span style="color: #a9a1e1; font-weight: bold;">stage2</span>
...

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">last stage</span>
<span style="color: #51afef;">FROM</span> <span style="color: #ECBE7B; font-weight: bold;">stage2</span>
...
</pre>
</div>
</div>
</div>
<div id="outline-container-0bbb90e1" class="outline-2">
<h2 id="0bbb90e1">ì™¸ë¶€ ë§í¬</h2>
<div class="outline-text-2" id="text-0bbb90e1">
<ul class="org-ul">
<li><a target="_blank" href="https://github.com/gauthamp10/dockerfile-boilerplates">ğŸŒdockerfile-boilerplates</a>:
ë‹¤ì–‘í•œ ì–¸ì–´ ë³„ Dockerfile í…œí”Œë¦¿ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œê°€ ì˜¬ë¼ì™€ìˆëŠ” ì €ì¥ì†Œ</li>
</ul>
</div>
</div>
<div class="mid-ad-container">
<ins class="adsbygoogle mid-ad"
     style="display:block"
     data-ad-client="ca-pub-1071465863344332"
     data-ad-slot="4306465772"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
<div class="backlinks-container">
<hr /><h1>ì´ ê¸€ì„ ë§í¬í•˜ëŠ” ê¸€ë“¤</h1>
<div class="article-link">
<div class="article-link-title-block">
<h2><a class="article-link-title" href="/note/docker.html">Docker</a></h2>
<div class="article-link-date">
2020ë…„ 6ì›” 1ì¼ ìˆ˜ì •</div>
</div>
</div>
<div class="article-link">
<div class="article-link-title-block">
<h2><a class="article-link-title" href="/note/docker-compose.html">Docker Compose</a></h2>
<div class="article-link-date">
2020ë…„ 5ì›” 9ì¼ ìˆ˜ì •</div>
</div>
</div>
</div>
</section>
<div class="side-ad-container">
<ins class="adsbygoogle side-ad"
     style="display:block"
     data-ad-client="ca-pub-1071465863344332"
     data-ad-slot="4306465772"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>
</div>
<div class="content-container">
<div class="left-empty"></div>
<div class="header-content">
<hr/>
<footer>
Copyright 2019 ~ 2020. Seorenn all rights reserved.
</footer>
</div><div class="side-ad-container"></div>
</div>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44534026-1"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-44534026-1');
</script>
</body>
</html>
